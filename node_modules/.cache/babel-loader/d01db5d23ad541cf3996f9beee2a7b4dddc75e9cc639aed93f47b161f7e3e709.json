{"ast":null,"code":"import React,{useEffect,useState}from'react';import'./Ledger.css';import{useLogout}from\"../hooks/useLogout\";import{useAuthContext}from\"../hooks/useAuthContext\";import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{faUber}from'@fortawesome/free-brands-svg-icons';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Ledger=()=>{const[transactions,setTransactions]=useState([]);const[timesVerified,setTimesVerified]=useState(0);const[verifiedCompanies,setVerifiedCompanies]=useState(0);const{user}=useAuthContext();const{logout}=useLogout();const handleLogout=()=>{logout();};const handleProfileClick=()=>{window.scrollTo(0,0);};useEffect(()=>{const pull=async()=>{const response=await fetch(\"http://localhost:5000/retrieve\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({transactions:user.transactions})});if(response.ok){const data=await response.json();console.log(\"Fetched data:\",data);setTransactions(data);// Store the fetched transactions\n// Update timesVerified and verifiedCompanies\nsetTimesVerified(data.length);const uniqueServices=new Set(data.map(item=>item.asset.data.service));setVerifiedCompanies(uniqueServices.size);}else{console.error(\"Error fetching data:\",response.statusText);}};pull();},[user.transactions]);// Dependency array\n;return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"App-header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"logo\",children:[/*#__PURE__*/_jsx(\"span\",{style:{color:\"#82A5FF\"},children:\"E\"}),\"cho\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"header-buttons\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"contact-button\",onClick:handleProfileClick,children:\"Profile\"}),/*#__PURE__*/_jsx(\"button\",{className:\"login-button\",onClick:handleLogout,children:\"Logout\"})]})]}),/*#__PURE__*/_jsxs(\"main\",{className:\"App-main\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"profile\",children:[/*#__PURE__*/_jsx(\"img\",{src:user.picture,alt:\"profile picture\",className:\"profile-picture\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Hi, \",user.name]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"You verified \",/*#__PURE__*/_jsx(\"span\",{style:{color:\"rgba(130, 165, 255, 1)\"},children:timesVerified}),\" times for \",/*#__PURE__*/_jsx(\"span\",{style:{color:\"rgba(130, 165, 255, 1)\"},children:verifiedCompanies}),\" companies.\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"ledger\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"My Verifications\"}),transactions.map((transaction,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"verification\",children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faUber,className:\"icon\"}),/*#__PURE__*/_jsx(\"div\",{className:\"verification-text\",children:/*#__PURE__*/_jsxs(\"p\",{children:[\"Platform: \",transaction.asset.data.service,/*#__PURE__*/_jsx(\"space\",{children:\"    \"}),\"Time: \",new Date(transaction.asset.data.start_time).toLocaleString()]})})]},index))]})]})]});};export default Ledger;","map":{"version":3,"names":["React","useEffect","useState","useLogout","useAuthContext","FontAwesomeIcon","faUber","jsx","_jsx","jsxs","_jsxs","Ledger","transactions","setTransactions","timesVerified","setTimesVerified","verifiedCompanies","setVerifiedCompanies","user","logout","handleLogout","handleProfileClick","window","scrollTo","pull","response","fetch","method","headers","body","JSON","stringify","ok","data","json","console","log","length","uniqueServices","Set","map","item","asset","service","size","error","statusText","className","children","style","color","onClick","src","picture","alt","name","transaction","index","icon","Date","start_time","toLocaleString"],"sources":["/Users/ashwin/Downloads/echo.github.io/src/components/Ledger.js"],"sourcesContent":["import React, {useEffect, useState} from 'react';\nimport './Ledger.css';\nimport { useLogout } from \"../hooks/useLogout\";\nimport { useAuthContext } from \"../hooks/useAuthContext\";\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faUber } from '@fortawesome/free-brands-svg-icons'; \n\n\n\n\nconst Ledger = () =>{\n  const [transactions, setTransactions] = useState([]);\n  const [timesVerified, setTimesVerified] = useState(0);\n  const [verifiedCompanies, setVerifiedCompanies] = useState(0);\n  \n  const { user } = useAuthContext();\n\n    const { logout } = useLogout()\n    const handleLogout = () => {\n        logout()\n    };\n    const handleProfileClick = () => {\n        window.scrollTo(0, 0);\n      };\n      useEffect(() => {\n        const pull = async () => {\n          const response = await fetch(\"http://localhost:5000/retrieve\", {\n            method: \"POST\",\n            headers: {\n              \"Content-Type\": \"application/json\",\n            },\n            body: JSON.stringify({\n              transactions: user.transactions\n            }),\n          });\n    \n          if (response.ok) {\n            const data = await response.json();\n            console.log(\"Fetched data:\", data);\n            setTransactions(data); // Store the fetched transactions\n    \n            // Update timesVerified and verifiedCompanies\n            setTimesVerified(data.length);\n            const uniqueServices = new Set(data.map(item => item.asset.data.service));\n            setVerifiedCompanies(uniqueServices.size);\n          } else {\n            console.error(\"Error fetching data:\", response.statusText);\n          }\n        };\n    \n        pull();\n      }, [user.transactions]); // Dependency array\n    \n    ;\n  return (\n    <div className=\"App\">\n      <header className=\"App-header\">\n          <div className=\"logo\"><span style={{color: \"#82A5FF\"}}>E</span>cho</div>\n          <div className=\"header-buttons\">\n          <button className='contact-button' onClick={handleProfileClick}>Profile</button>\n            <button className='login-button' onClick={handleLogout}>Logout</button>\n          </div>\n      </header>\n      <main className=\"App-main\">\n        <div className='profile'>\n          <img src={user.picture} alt=\"profile picture\" className='profile-picture'></img>\n          <div>\n          <h2>Hi, {user.name}</h2>\n          <p>You verified <span style={{color:\"rgba(130, 165, 255, 1)\"}}>{timesVerified}</span> times for <span style={{color:\"rgba(130, 165, 255, 1)\"}}>{verifiedCompanies}</span> companies.</p>\n          </div>\n        </div>\n        <div className='ledger'>\n          <h4>My Verifications</h4>\n          {transactions.map((transaction, index) => (\n            <div className='verification' key={index}>\n              <FontAwesomeIcon icon={faUber} className=\"icon\" />\n              <div className=\"verification-text\">\n                <p>\n                  Platform: {transaction.asset.data.service}<space>    </space>\n                  Time: {new Date(transaction.asset.data.start_time).toLocaleString()}\n                </p>\n              </div>\n            </div>\n          ))}\n        </div>\n      </main>\n    </div>\n  );\n}\n\nexport default Ledger;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}